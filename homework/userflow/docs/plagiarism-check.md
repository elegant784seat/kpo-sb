# Проверка на плагиат

## Обзор
Система автоматически проверяет загруженные студенческие работы на наличие плагиата путём сравнения с ранее загруженными файлами. Анализ основан на криптографическом хэшировании содержимого работ.

## Процесс анализа

### 1. Загрузка файла
- Пользователь загружает файл через Gateway API
- Файл сохраняется в S3-совместимом хранилище (MinIO)
- Метаданные (имя, размер, студент, работа) сохраняются в PostgreSQL

### 2. Запуск анализа
- После успешной загрузки инициируется фоновый запрос к Analysis Service
- Передаётся идентификатор файла для анализа

### 3. Сравнение содержимого
- Анализ-сервис извлекает содержимое текущего файла
- Вычисляется хэш SHA-256 от содержимого
- Система запрашивает все ранее загруженные файлы по той же учебной работе
- Сравнивает хэш текущего файла с хэшами ранее загруженных работ

### 4. Формирование отчёта
- Если найдено совпадение — флаг `plagiarismDetected` устанавливается в `true`
- Если совпадений нет — флаг устанавливается в `false`
- Отчёт сохраняется в базе данных с привязкой к студенту и работе

## Технологии анализа
- **Алгоритм хэширования:** SHA-256
- **Точность сравнения:** 100% (только полные совпадения)
- **Производительность:** O(n) относительно количества ранее загруженных работ

## Ограничения
- Проверка работает **только внутри одной учебной работы**  
  (файлы из разных работ не сравниваются между собой)
- Поддерживаются только бинарные совпадения (не семантический анализ)
- Текст должен быть в неизменном виде (переформатирование или замена слов обходит проверку)

## Безопасность и надёжность
- Содержимое файлов хранится в зашифрованном S3-хранилище
- Хэши вычисляются на стороне Analysis Service — исходные файлы не покидают систему
- Все операции логируются для аудита